<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>tsbm - web</title>
  <link rel="stylesheet" href="../../layui/css/layui.css">
</head>
<body class="layui-layout-body" style="overflow:scroll;">
  <div style="padding: 15px;padding-bottom: 1px;" id="body">
    <form class="layui-form" action="#">
    		  <div class="layui-form-item">
		    <label class="layui-form-label">模板名称</label>
		    <div class="layui-input-block">
		      <input type="text" name="name" autocomplete="off" class="layui-input name">
		    </div>
		    </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">测试模式</label>
		    <div class="layui-input-block">
		    	  <input type="radio" name="testMode" value="read" title="read" class="layui-input testMode">
			  <input type="radio" name="testMode" value="write" title="write"  class="layui-input testMode" checked>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">是否均衡负载</label>
		    <div class="layui-input-block">
		      <input type="radio" name="backgroundStatus" value="1" title="是" class="layui-input backgroundStatus">
			  <input type="radio" name="backgroundStatus" value="0" title="否"  class="layui-input backgroundStatus" checked>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">每个设备的传感器数</label>
		    <div class="layui-input-block">
		      <input type="text" value="150"  autocomplete="off" class="layui-input sensorNum">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">每个客户端对应的设备数</label>
		    <div class="layui-input-block">
		      <input type="text" value="50"  autocomplete="off" class="layui-input deviceNum">
		    </div>
		  </div>
    		  <div class="layui-form-item">
		    <label class="layui-form-label">负载开始时间</label>
		    <div class="layui-input-block">
		      <input type="text"   autocomplete="off" class="layui-input startTime">
		    </div>
		    </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">负载结束时间</label>
		    <div class="layui-input-block">
		      <input type="text"  autocomplete="off" class="layui-input endTime">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">写入步长</label>
		    <div class="layui-input-block">
		      <input type="text" value="7000"  autocomplete="off" class="layui-input step">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">写入缓存次数</label>
		    <div class="layui-input-block">
		      <input type="text" value="1" autocomplete="off" class="layui-input cacheTimes">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">写入客户端数</label>
		    <div class="layui-input-block">
		      <input type="text" value="10" id="passwd"  autocomplete="off" class="layui-input writeClients">
		    </div>
		  </div>
    		  <div class="layui-form-item">
		    <label class="layui-form-label">数据丢失率</label>
		    <div class="layui-input-block">
		      <input type="text" value="0.001"  autocomplete="off" class="layui-input loseRatio">
		    </div>
		    </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">写入thinkTimes</label>
		    <div class="layui-input-block">
		      <input type="text" value="200" autocomplete="off" class="layui-input writePulse">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">读测试时长</label>
		    <div class="layui-input-block">
		      <input type="text" value="7000"  autocomplete="off" class="layui-input readPeriod">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">读操作客户端数</label>
		    <div class="layui-input-block">
		      <input type="text" value="50" autocomplete="off" class="layui-input readClients">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">读操作时长</label>
		    <div class="layui-input-block">
		      <input type="text" value="30000" autocomplete="off" class="layui-input readPeriod">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">读thinkTimes</label>
		    <div class="layui-input-block">
		      <input type="text" value="20" autocomplete="off" class="layui-input readPulse">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">简单查询率</label>
		    <div class="layui-input-block">
		      <input type="text"  autocomplete="off" class="layui-input readSimpleRatio" value="0.8" >
		    </div>
		  </div>
    		  <div class="layui-form-item">
		    <label class="layui-form-label">分析查询率</label>
		    <div class="layui-input-block">
		      <input type="text"   autocomplete="off" class="layui-input readAggreRatio" value="0.1">
		    </div>
		    </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">分组查询率</label>
		    <div class="layui-input-block">
		      <input type="text"  autocomplete="off" class="layui-input readShrinkRatio" value="0.1">
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">是否动态测试</label>
		    <div class="layui-input-block">
		      <input type="radio" name="dyn_status" value="1" title="是" class="layui-input dyn_status">
			  <input type="radio" name="dyn_status" value="0" title="否"  class="layui-input dyn_status" checked>
		    </div>
		  </div>
		  <div class="layui-form-item">
		    <label class="layui-form-label">动态测试值</label>
		    <div class="layui-input-block">
		      <input type="text" autocomplete="off" class="layui-input dyn_values">
		    </div>
		  </div>
		    <div class="layui-form-item">
			    <div class="layui-input-block">
			      <button id="save" class="layui-btn" type="button" >立即提交</button>
			      <button type="reset" class="layui-btn layui-btn-primary">重置</button>
			    </div>
			  </div>
    </form>
    </div>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="../../../layer/layer.js"></script>
<script src="../../../layui/layui.js"></script>
<script>
//JavaScript代码区域
	//初始化option
$(function(){
	layui.use('form', function(){
		  var form = layui.form;
		  //各种基于事件的操作，下面会有进一步介绍
	});
	layui.use('laydate', function(){
		  var laydate = layui.laydate;
		  
		  //执行一个laydate实例
		  laydate.render({
		    elem: '.startTime', //指定元素
		    format: 'yyyy-MM-dd HH:mm:ss'
		    	 ,type: 'datetime',
		    	 value: new Date()
		  });
		  laydate.render({
			    elem: '.endTime', //指定元素
			    format: 'yyyy-MM-dd HH:mm:ss'
			    	 ,type: 'datetime',
			    	 value: new Date()
			  });
		});
	$('.layui-layout-body').on('click','#save',function(){
		var name = $('.name').val()
		var startTime =$('.startTime').val();
		var testMode=$('.testMode').val();
		var backgroundStatus=$('.backgroundStatus').val();
		var deviceNum=$('.deviceNum').val();
		var sensorNum=$('.sensorNum').val();
		var endTime=$('.endTime').val();
		var step=$('.step').val();
		var writeClients=$('.writeClients').val();
		var loseRatio=$('.loseRatio').val();
		var writePulse=$('.writePulse').val();
		var readPulse=$('.readPulse').val();
		var readPeriod=$('.readPeriod').val();
		var readClients=$('.readClients').val();
		var readSimpleRatio=$('.readSimpleRatio').val();
		var readAggreRatio=$('.readAggreRatio').val();
		var readShrinkRatio=$('.readShrinkRatio').val();
		var dynStatus=$('.dyn_status').val();
		var dynValues=$('.dyn_values').val();
		var cacheTimes=$('.cacheTimes').val();
		$.ajax({
			url:'/base/add/template',
			type:'post',
			data:{name:name
				,startTime:startTime
				,testMode:testMode
				,backgroundStatus:backgroundStatus
				,deviceNum:deviceNum
				,sensorNum:sensorNum
				,endTime:endTime
				,step:step
				,cacheTimes:cacheTimes
				,writeClients:writeClients
				,loseRatio:loseRatio
				,writePulse:writePulse
				,readPeriod:readPeriod
				,readPulse:readPulse
				,readClients:readClients
				,readSimpleRatio:readSimpleRatio
				,readAggreRatio:readAggreRatio
				,readShrinkRatio:readShrinkRatio
				,dynStatus:dynStatus
				,dynValues:dynValues},
			dataType:'json',
			success:function(res){
				var index = parent.layer.getFrameIndex(window.name);
				parent.layer.close(index);
			}
		})
	})
});
</script>
</body>
</html>